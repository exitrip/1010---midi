echo 'deb http://download.opensuse.org/repositories/home:/aggraef:/purr-data-jgu/xUbuntu_23.04/ /' | sudo tee /etc/apt/sources.list.d/home:aggraef:purr-data-jgu.list
curl -fsSL https://download.opensuse.org/repositories/home:aggraef:purr-data-jgu/xUbuntu_23.04/Release.key | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/home_aggraef_purr-data-jgu.gpg > /dev/null
sudo apt update

sudo apt install build-essential libasound-dev hostapd purr-data openssh-server

sudo systemctl enable ssh

nmcli c add type wifi ifname wlp3s0 con-name exitrip-ap autoconnect yes ssid eXiTrip
nmcli connection modify exitrip-ap 802-11-wireless.mode ap 802-11-wireless.band bg ipv4.method shared
nmcli connection modify exitrip-ap wifi-sec.key-mgmt wpa-psk
nmcli c mod exitrip-ap wifi-sec.psk "noise666"
nmcli c up exitrip-ap

sudo cp udev/rules.d/midi-usbserial.rules /etc/udev/rules.d/midi-usbserial.rules
sudo cp systemd/system/midi-usbserial.service /etc/systemd/system/midi-usbserial.service

# find pd's desktop file, copy, and change command line to startPD.sh
ln -s 1010---midi/pd-patches/eXiTrip-PD.desktop .config/autostart/eXiTrip-PD.desktop
ln -s 1010---midi/pd-patches/eXiTrip-PD.desktop .local/share/applications/eXiTrip-PD.desktop
